import{P}from"./PaginationView-3d68dd19.js";import{S as _}from"./sweetalert2.all-020ccd15.js";import{_ as T,r as g,o as i,a as n,b as t,i as m,d as r,F as h,h as b,w as u,t as d,g as f}from"./index-7b871658.js";const{VITE_API:y,VITE_APIPATH:x}={VITE_API:"https://vue3-course-api.hexschool.io/",VITE_APIPATH:"whattoplay",BASE_URL:"/what_to_play/",MODE:"production",DEV:!1,PROD:!0},L={data(){return{products:[],page:{},isLoading:!1,category:""}},computed:{filteredProducts(){return this.products.filter(a=>a.category===this.category)}},components:{PaginationView:P},methods:{getProducts(a=1){this.isLoading=!0,this.$http.get(`${y}/v2/api/${x}/products/?page=${a}`).then(o=>{this.isLoading=!1,this.products=o.data.products,this.page=o.data.pagination}).catch(o=>{this.isLoading=!1,_.fire({icon:"error",title:`錯誤 ${o.response.status}`,text:o.response.data.message,confirmButtonText:"OK"})})},addToCart(a){const o={product_id:a,qty:1};this.isLoading=!0,this.$http.post(`${y}/v2/api/${x}/cart`,{data:o}).then(l=>{this.isLoading=!1,_.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3}).fire({icon:"success",title:l.data.message})}).catch(l=>{this.isLoading=!1,_.fire({icon:"error",title:`錯誤 ${l.response.status}`,text:l.response.data.message,confirmButtonText:"OK"})})}},mounted(){this.getProducts()}},$={class:"container mt-md-5 mt-3 mb-7"},C={class:"row justify-content-center"},V={class:"col-md-2"},E={class:"accordion border border-bottom border-top-0 border-start-0 border-end-0 mb-3",id:"accordionExample"},I={class:"card border-0 d-flex flex-column align-items-md-start align-items-center"},j=t("div",{class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0",id:"headingOne","data-bs-toggle":"collapse","data-bs-target":"#collapseOne"},[t("h4",{class:"mb-0 text-nowrap"},"商品分類")],-1),O={id:"collapseOne",class:"collapse show","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},A={class:"card-body py-0"},B={class:"list-unstyled"},N={class:"col-md-8"},S={key:0,class:"row"},D={class:"card mb-2 position-relative position-relative"},U=["src"],F={class:"card-body pb-2 d-flex flex-column justify-content-between",style:{height:"160px"}},H={class:"mt-3 fs-5"},K={class:"card-text mb-0"},M={class:"text-muted"},R=["onClick"],q={key:1,class:"row"},z={class:"card mb-2 position-relative position-relative"},G=["src"],J={class:"card-body pb-2 d-flex flex-column justify-content-between",style:{height:"160px"}},Q={class:"mt-3 fs-5"},W={class:"card-text mb-0"},X={class:"text-muted"},Y=["onClick"];function Z(a,o,l,tt,s,c){const v=g("LoadingView"),p=g("router-link"),w=g("PaginationView");return i(),n("div",$,[t("div",C,[t("div",V,[t("div",E,[t("div",I,[j,t("div",O,[t("div",A,[t("ul",B,[t("li",null,[t("a",{href:"#",class:"py-2 d-block text-muted text-nowrap link-primary",onClick:o[0]||(o[0]=m(e=>s.category="",["prevent"]))}," 全部 ")]),t("li",null,[t("a",{href:"#",class:"py-2 d-block text-muted text-nowrap link-primary",onClick:o[1]||(o[1]=m(e=>s.category="盒玩",["prevent"]))}," 盒玩 ")]),t("li",null,[t("a",{href:"#",class:"py-2 d-block text-muted text-nowrap link-primary",onClick:o[2]||(o[2]=m(e=>s.category="扭蛋",["prevent"]))}," 扭蛋 ")]),t("li",null,[t("a",{href:"#",class:"py-2 d-block text-muted text-nowrap link-primary",onClick:o[3]||(o[3]=m(e=>s.category="模型",["prevent"]))}," 模型 ")])])])])])]),r(v,{active:s.isLoading,"onUpdate:active":o[4]||(o[4]=e=>s.isLoading=e)},null,8,["active"])]),t("div",N,[this.category==""?(i(),n("div",S,[(i(!0),n(h,null,b(s.products,e=>(i(),n("div",{class:"col-md-6 mb-3",key:e.id},[t("div",D,[r(p,{to:`/product/${e.id}`},{default:u(()=>[t("img",{src:e.imageUrl,class:"card-img-top rounded-top",alt:"productImage",style:{"max-height":"150px","object-fit":"cover","object-position":"top center"}},null,8,U)]),_:2},1032,["to"]),t("div",F,[r(p,{to:`/product/${e.id}`},{default:u(()=>[t("h4",H,d(e.title),1)]),_:2},1032,["to"]),t("p",K,[f(" NT$"+d(e.price.toLocaleString())+" ",1),t("span",M,[t("del",null,"NT$"+d(e.origin_price.toLocaleString()),1)])]),t("button",{type:"button",class:"btn btn-outline-primary btn-sm text-nowrap align-self-end",onClick:k=>c.addToCart(e.id)}," 加入購物車 ",8,R)])])]))),128))])):(i(),n("div",q,[(i(!0),n(h,null,b(c.filteredProducts,e=>(i(),n("div",{class:"col-md-6 mb-4",key:e.id},[t("div",z,[r(p,{to:`/product/${e.id}`},{default:u(()=>[t("img",{src:e.imageUrl,class:"card-img-top rounded-0",alt:"productImage",style:{"max-height":"150px","object-fit":"cover","object-position":"top center"}},null,8,G)]),_:2},1032,["to"]),t("div",J,[r(p,{to:`/product/${e.id}`},{default:u(()=>[t("h4",Q,d(e.title),1)]),_:2},1032,["to"]),t("p",W,[f(" NT$"+d(e.price)+" ",1),t("span",X,[t("del",null,"NT$"+d(e.origin_price),1)])]),t("button",{type:"button",class:"btn btn-outline-primary btn-sm text-nowrap align-self-end",onClick:k=>c.addToCart(e.id)}," 加入購物車 ",8,Y)])])]))),128))])),r(w,{pages:s.page,onEmitPage:c.getProducts,class:"d-flex justify-content-center"},null,8,["pages","onEmitPage"])])])])}const it=T(L,[["render",Z]]);export{it as default};
