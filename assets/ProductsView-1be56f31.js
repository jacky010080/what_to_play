import{P}from"./PaginationView-f7de9e64.js";import{S as h}from"./sweetalert2.all-db541221.js";import{_ as L,r as g,o as i,a as n,b as t,h as m,d as c,F as u,g as f,w as _,t as l,f as v}from"./index-bb8d6e6e.js";const{VITE_API:b,VITE_APIPATH:y}={VITE_API:"https://vue3-course-api.hexschool.io/",VITE_APIPATH:"whattoplay",BASE_URL:"/what_to_play/",MODE:"production",DEV:!1,PROD:!0},C={emits:["refreshCart"],data(){return{products:[],page:{},isLoading:!1,category:""}},computed:{filteredProducts(){return this.products.filter(a=>a.category===this.category)}},components:{PaginationView:P},methods:{getProducts(a=1){this.isLoading=!0,this.$http.get(`${b}/v2/api/${y}/products/?page=${a}`).then(s=>{this.isLoading=!1,this.products=s.data.products,this.page=s.data.pagination}).catch(s=>{this.isLoading=!1,h.fire({icon:"error",title:`錯誤 ${s.response.status}`,text:s.response.data.message,confirmButtonText:"OK"})})},addToCart(a){const s={product_id:a,qty:1};this.isLoading=!0,this.$http.post(`${b}/v2/api/${y}/cart`,{data:s}).then(r=>{this.isLoading=!1,h.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3}).fire({icon:"success",title:r.data.message}),this.$emit("refreshCart")}).catch(r=>{this.isLoading=!1,h.fire({icon:"error",title:`錯誤 ${r.response.status}`,text:r.response.data.message,confirmButtonText:"OK"})})}},mounted(){this.getProducts()}},T={class:"container mt-md-5 mt-3 mb-7"},$={class:"row justify-content-center"},V={class:"col-md-2"},E={class:"accordion mb-3",id:"accordionExample"},j={class:"card border-0 d-flex flex-column align-items-md-start align-items-center"},I=t("div",{class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0",id:"headingOne","data-bs-toggle":"collapse","data-bs-target":"#collapseOne"},[t("h4",{class:"mb-0 text-nowrap"},"商品分類")],-1),O={id:"collapseOne",class:"collapse show border-bottom","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},S={class:"card-body py-0"},A={class:"list-unstyled nav d-flex flex-column"},B={class:"nav-item"},N={class:"nav-item"},D={class:"nav-item"},U={class:"nav-item"},F={class:"col-md-8"},H={key:0,class:"row"},K={class:"card mb-2 position-relative position-relative"},M=["src"],R={class:"card-body pb-2 d-flex flex-column justify-content-md-between",style:{height:"140px"}},q={class:"mt-3 fs-5"},z={class:"card-text d-flex justify-content-between"},G={class:"text-muted"},J=["onClick"],Q={key:1,class:"row"},W={class:"card mb-2 position-relative position-relative"},X=["src"],Y={class:"card-body pb-2 d-flex flex-column justify-content-md-between",style:{height:"140px"}},Z={class:"mt-3 fs-5"},tt={class:"card-text d-flex justify-content-between"},et={class:"text-muted"},st=["onClick"];function ot(a,s,r,it,o,d){const x=g("LoadingView"),p=g("router-link"),w=g("PaginationView");return i(),n("div",T,[t("div",$,[t("div",V,[t("div",E,[t("div",j,[I,t("div",O,[t("div",S,[t("ul",A,[t("li",B,[t("a",{href:"#",class:"nav-link py-2 d-block text-nowrap",onClick:s[0]||(s[0]=m(e=>o.category="",["prevent"]))}," 全部 ")]),t("li",N,[t("a",{href:"#",class:"nav-link py-2 d-block text-nowrap",onClick:s[1]||(s[1]=m(e=>o.category="盒玩",["prevent"]))}," 盒玩 ")]),t("li",D,[t("a",{href:"#",class:"nav-link py-2 d-block text-nowrap",onClick:s[2]||(s[2]=m(e=>o.category="扭蛋",["prevent"]))}," 扭蛋 ")]),t("li",U,[t("a",{href:"#",class:"nav-link py-2 d-block text-nowrap",onClick:s[3]||(s[3]=m(e=>o.category="模型",["prevent"]))}," 模型 ")])])])])])]),c(x,{active:o.isLoading,"onUpdate:active":s[4]||(s[4]=e=>o.isLoading=e)},null,8,["active"])]),t("div",F,[this.category==""?(i(),n("div",H,[(i(!0),n(u,null,f(o.products,e=>(i(),n("div",{class:"col-md-6 mb-3",key:e.id},[t("div",K,[c(p,{to:`/product/${e.id}`},{default:_(()=>[t("img",{src:e.imageUrl,class:"card-img-top rounded-top",alt:"productImage",style:{height:"150px","object-fit":"cover","object-position":"top center"}},null,8,M)]),_:2},1032,["to"]),t("div",R,[c(p,{to:`/product/${e.id}`},{default:_(()=>[t("h4",q,l(e.title),1)]),_:2},1032,["to"]),t("div",z,[t("p",null,[v(" NT$"+l(e.price.toLocaleString())+" ",1),t("span",G,[t("del",null,"NT$"+l(e.origin_price.toLocaleString()),1)])]),t("button",{type:"button",class:"btn btn-outline-primary btn-md-sm text-nowrap align-self-end mt-4",onClick:k=>d.addToCart(e.id)}," 加入購物車 ",8,J)])])])]))),128))])):(i(),n("div",Q,[(i(!0),n(u,null,f(d.filteredProducts,e=>(i(),n("div",{class:"col-md-6 mb-3",key:e.id},[t("div",W,[c(p,{to:`/product/${e.id}`},{default:_(()=>[t("img",{src:e.imageUrl,class:"card-img-top rounded-top",alt:"productImage",style:{height:"150px","object-fit":"cover","object-position":"top center"}},null,8,X)]),_:2},1032,["to"]),t("div",Y,[c(p,{to:`/product/${e.id}`},{default:_(()=>[t("h4",Z,l(e.title),1)]),_:2},1032,["to"]),t("div",tt,[t("p",null,[v(" NT$"+l(e.price.toLocaleString())+" ",1),t("span",et,[t("del",null,"NT$"+l(e.origin_price.toLocaleString()),1)])]),t("button",{type:"button",class:"btn btn-outline-primary btn-md-sm text-nowrap align-self-end mt-4",onClick:k=>d.addToCart(e.id)}," 加入購物車 ",8,st)])])])]))),128))])),c(w,{pages:o.page,onEmitPage:d.getProducts,class:"d-flex justify-content-center"},null,8,["pages","onEmitPage"])])])])}const lt=L(C,[["render",ot]]);export{lt as default};
