import{S as n}from"./sweetalert2.all-6f04c237.js";import{_ as v,r as g,o as u,a as p,b as t,d,w as _,t as c,F as x,h as y,f as w,g as r}from"./index-5cfac956.js";const{VITE_API:h,VITE_APIPATH:m}={VITE_API:"https://vue3-course-api.hexschool.io/",VITE_APIPATH:"whattoplay",BASE_URL:"/what_to_play/",MODE:"production",DEV:!1,PROD:!0},T={data(){return{product:{},products:[],isLoading:!1}},methods:{getTargetProduct(){const{id:a}=this.$route.params;this.isLoading=!0,this.$http.get(`${h}/v2/api/${m}/product/${a}`).then(s=>{this.isLoading=!1,this.product=s.data.product,this.getProducts()}).catch(s=>{this.isLoading=!1,n.fire({icon:"error",title:`錯誤 ${s.response.status}`,text:s.response.data.message,confirmButtonText:"OK"})})},getProducts(a=1){this.isLoading=!0,this.$http.get(`${h}/v2/api/${m}/products/?page=${a}`).then(s=>{this.isLoading=!1;for(const i of s.data.products)if(i.id!==this.product.id&&i.category===this.product.category&&this.products.push(i),this.products.length>=3)break}).catch(s=>{this.isLoading=!1,n.fire({icon:"error",title:`錯誤 ${s.response.status}`,text:s.response.data.message,confirmButtonText:"OK"})})},addToCart(a){const s={product_id:a,qty:1};this.isLoading=!0,this.$http.post(`${h}/v2/api/${m}/cart`,{data:s}).then(i=>{this.isLoading=!1,n.fire({icon:"success",title:i.data.message,confirmButtonText:"OK"})}).catch(i=>{this.isLoading=!1,n.fire({icon:"error",title:`錯誤 ${i.response.status}`,text:i.response.data.message,confirmButtonText:"OK"})})}},mounted(){this.getTargetProduct()}},L={class:"container my-5"},$={class:"row justify-content-center align-items-center"},k={class:"col-md-6"},P={id:"carouselExampleControls",class:"carousel slide","data-ride":"carousel"},V={class:"carousel-inner"},E={class:"carousel-item active"},C=["src"],B={class:"col-md-4"},I={"aria-label":"breadcrumb"},N={class:"breadcrumb bg-white px-0 mb-0 py-3"},j={class:"breadcrumb-item"},A={class:"breadcrumb-item"},O=t("li",{class:"breadcrumb-item active","aria-current":"page"},"Detail",-1),D={class:"fw-bold h1 mb-1"},S={class:"mb-0 text-muted text-end"},K={class:"h4 fw-bold text-end"},U={class:"row align-items-center"},H=w('<div class="col-6"><div class="input-group my-3 bg-light rounded"><div class="input-group-prepend"><button class="btn btn-outline-dark border-0 py-2" type="button" id="button-addon1"><i class="fas fa-minus"></i></button></div><input type="text" class="form-control border-0 text-center my-auto shadow-none bg-light" placeholder="" aria-label="Example text with button addon" aria-describedby="button-addon1" value="1"><div class="input-group-append"><button class="btn btn-outline-dark border-0 py-2" type="button" id="button-addon2"><i class="fas fa-plus"></i></button></div></div></div>',1),F={class:"col-6"},R={class:"row my-5 col-12 justify-content-center"},q={class:"col-md-6"},M={class:"col-md-4"},z={class:"text-muted"},G={class:"row justify-content-center"},J={class:"col-md-10"},Q={class:"row justify-content-between mt-4"},W=t("h3",{class:"fw-bold"},"你可能還喜歡...",-1),X={class:"mb-4 position-relative position-relative"},Y=["src"],Z=t("a",{href:"#",class:"text-dark"},[t("i",{class:"far fa-heart position-absolute",style:{right:"16px",top:"16px"}})],-1),tt={class:"card-body p-0 d-flex justify-content-between align-items-end"},st={class:"w-75"},ot={class:"mb-0 mt-3 fs-5"},et={class:"card-text mb-0"},it={class:"text-muted"},ct=["onClick"];function at(a,s,i,nt,o,b){const f=g("LoadingView"),l=g("router-link");return u(),p("div",L,[t("div",$,[t("div",k,[d(f,{active:o.isLoading,"onUpdate:active":s[0]||(s[0]=e=>o.isLoading=e)},null,8,["active"]),t("div",P,[t("div",V,[t("div",E,[t("img",{src:o.product.imageUrl,class:"d-block w-100",alt:"..."},null,8,C)])])])]),t("div",B,[t("nav",I,[t("ol",N,[t("li",j,[d(l,{to:"/",class:"text-muted"},{default:_(()=>[r("Home")]),_:1})]),t("li",A,[d(l,{to:"/products",class:"text-muted"},{default:_(()=>[r("Product")]),_:1})]),O])]),t("h2",D,c(o.product.title),1),t("p",S,[t("del",null,"NT$"+c(o.product.origin_price),1)]),t("p",K,"NT$"+c(o.product.price),1),t("div",U,[H,t("div",F,[t("button",{type:"button",class:"btn btn-primary py-2 text-nowrap w-100",onClick:s[1]||(s[1]=e=>b.addToCart(o.product.id))},"加入購物車")])])])]),t("div",R,[t("div",q,[t("p",null,c(o.product.description),1)]),t("div",M,[t("p",z,c(o.product.content),1)])]),t("div",G,[t("div",J,[t("div",Q,[W,(u(!0),p(x,null,y(o.products,e=>(u(),p("div",{class:"col-md-4 mt-2",key:e.id},[t("div",X,[t("img",{src:e.imageUrl,class:"card-img-top rounded-0",alt:"...",style:{"max-height":"150px","object-fit":"cover","object-position":"top center"}},null,8,Y),Z,t("div",tt,[t("div",st,[t("h4",ot,[d(l,{to:`/product/${e.id}`},{default:_(()=>[r(c(e.title),1)]),_:2},1032,["to"])]),t("p",et,[r("NT$"+c(e.price)+" ",1),t("span",it,[t("del",null,"NT$"+c(e.origin_price),1)])])]),t("button",{type:"button",class:"btn btn-outline-primary btn-sm text-nowrap",onClick:dt=>b.addToCart(e.id)},"加入購物車",8,ct)])])]))),128))])])])])}const ut=v(T,[["render",at]]);export{ut as default};
