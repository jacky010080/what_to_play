import{P}from"./PaginationView-9efb20ca.js";import{S as h}from"./sweetalert2.all-17bbc015.js";import{_ as T,r as m,o as i,c as a,a as t,h as l,b as p,F as g,f as b,w as f,e as _,t as r}from"./index-2ae0a4c1.js";const{VITE_API:v,VITE_APIPATH:x}={VITE_API:"https://vue3-course-api.hexschool.io/",VITE_APIPATH:"whattoplay",BASE_URL:"/what_to_play/",MODE:"production",DEV:!1,PROD:!0},V={data(){return{products:[],page:{},isLoading:!1,category:""}},computed:{filteredProducts(){return this.products.filter(n=>n.category===this.category)}},components:{PaginationView:P},methods:{getProducts(n=1){this.isLoading=!0,this.$http.get(`${v}/v2/api/${x}/products/?page=${n}`).then(s=>{this.isLoading=!1,this.products=s.data.products,this.page=s.data.pagination}).catch(s=>{this.isLoading=!1,h.fire({icon:"error",title:`錯誤 ${s.response.status}`,text:s.response.data.message,confirmButtonText:"OK"})})},addToCart(n){const s={product_id:n,qty:1};this.isLoading=!0,this.$http.post(`${v}/v2/api/${x}/cart`,{data:s}).then(c=>{this.isLoading=!1,h.fire({icon:"success",title:c.data.message,confirmButtonText:"OK"})}).catch(c=>{this.isLoading=!1,h.fire({icon:"error",title:`錯誤 ${c.response.status}`,text:c.response.data.message,confirmButtonText:"OK"})})}},mounted(){this.getProducts()}},C={class:"container mt-md-5 mt-3 mb-7"},L={class:"row justify-content-center"},$={class:"col-2"},E={class:"accordion border border-bottom border-top-0 border-start-0 border-end-0 mb-3",id:"accordionExample"},O={class:"card border-0"},j=t("div",{class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0",id:"headingOne","data-bs-toggle":"collapse","data-bs-target":"#collapseOne"},[t("div",{class:"pe-1"},[t("h4",{class:"mb-0 text-nowrap"}," 商品分類 "),t("i",{class:"fas fa-chevron-down"})])],-1),I={id:"collapseOne",class:"collapse show","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},A={class:"card-body py-0"},B={class:"list-unstyled"},N={class:"col-md-8"},D={key:0,class:"row"},S={class:"card border-0 mb-4 position-relative position-relative"},U=["src"],K=t("a",{href:"#",class:"text-dark"},[t("i",{class:"far fa-heart position-absolute",style:{right:"16px",top:"16px"}})],-1),F={class:"card-body p-0 d-flex justify-content-between align-items-end"},H={class:"w-75"},M={class:"mb-0 mt-3 fs-5"},R={class:"card-text mb-0"},q={class:"text-muted"},z=["onClick"],G={key:1,class:"row"},J={class:"card border-0 mb-4 position-relative position-relative"},Q=["src"],W=t("a",{href:"#",class:"text-dark"},[t("i",{class:"far fa-heart position-absolute",style:{right:"16px",top:"16px"}})],-1),X={class:"card-body p-0 d-flex justify-content-between align-items-end"},Y={class:"w-75"},Z={class:"mb-0 mt-3 fs-5"},tt={class:"card-text mb-0"},et={class:"text-muted"},st=["onClick"];function ot(n,s,c,it,o,d){const y=m("LoadingView"),u=m("router-link"),w=m("PaginationView");return i(),a("div",C,[t("div",L,[t("div",$,[t("div",E,[t("div",O,[j,t("div",I,[t("div",A,[t("ul",B,[t("li",null,[t("a",{href:"#",class:"py-2 d-block text-muted text-nowrap",onClick:s[0]||(s[0]=l(e=>o.category="",["prevent"]))},"全部")]),t("li",null,[t("a",{href:"#",class:"py-2 d-block text-muted text-nowrap",onClick:s[1]||(s[1]=l(e=>o.category="盒玩",["prevent"]))},"盒玩")]),t("li",null,[t("a",{href:"#",class:"py-2 d-block text-muted text-nowrap",onClick:s[2]||(s[2]=l(e=>o.category="扭蛋",["prevent"]))},"扭蛋")]),t("li",null,[t("a",{href:"#",class:"py-2 d-block text-muted text-nowrap",onClick:s[3]||(s[3]=l(e=>o.category="模型",["prevent"]))},"模型")])])])])])]),p(y,{active:o.isLoading,"onUpdate:active":s[4]||(s[4]=e=>o.isLoading=e)},null,8,["active"])]),t("div",N,[this.category==""?(i(),a("div",D,[(i(!0),a(g,null,b(o.products,e=>(i(),a("div",{class:"col-md-6",key:e.id},[t("div",S,[t("img",{src:e.imageUrl,class:"card-img-top rounded-0",alt:"...",style:{"max-height":"200px","object-fit":"cover","object-position":"top center"}},null,8,U),K,t("div",F,[t("div",H,[t("h4",M,[p(u,{to:`/product/${e.id}`},{default:f(()=>[_(r(e.title),1)]),_:2},1032,["to"])]),t("p",R,[_("NT$"+r(e.price)+" ",1),t("span",q,[t("del",null,"NT$"+r(e.origin_price),1)])])]),t("button",{type:"button",class:"btn btn-outline-primary btn-sm text-nowrap",onClick:k=>d.addToCart(e.id)},"加入購物車",8,z)])])]))),128))])):(i(),a("div",G,[(i(!0),a(g,null,b(d.filteredProducts,e=>(i(),a("div",{class:"col-md-6",key:e.id},[t("div",J,[t("img",{src:e.imageUrl,class:"card-img-top rounded-0",alt:"...",style:{"max-height":"200px","object-fit":"cover","object-position":"top center"}},null,8,Q),W,t("div",X,[t("div",Y,[t("h4",Z,[p(u,{to:`/product/${e.id}`},{default:f(()=>[_(r(e.title),1)]),_:2},1032,["to"])]),t("p",tt,[_("NT$"+r(e.price)+" ",1),t("span",et,[t("del",null,"NT$"+r(e.origin_price),1)])])]),t("button",{type:"button",class:"btn btn-outline-primary btn-sm text-nowrap",onClick:k=>d.addToCart(e.id)},"加入購物車",8,st)])])]))),128))])),p(w,{pages:o.page,onEmitPage:d.getProducts,class:"d-flex justify-content-center"},null,8,["pages","onEmitPage"])])])])}const ct=T(V,[["render",ot]]);export{ct as default};
