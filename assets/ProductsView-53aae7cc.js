import{P}from"./PaginationView-951c1715.js";import{S as u}from"./sweetalert2.all-6e914073.js";import{_ as T,r as m,o as i,a,b as t,i as _,d as r,F as g,h as b,w as h,t as c,g as f}from"./index-f12a5d9a.js";const{VITE_API:x,VITE_APIPATH:v}={VITE_API:"https://vue3-course-api.hexschool.io/",VITE_APIPATH:"whattoplay",BASE_URL:"/what_to_play/",MODE:"production",DEV:!1,PROD:!0},$={data(){return{products:[],page:{},isLoading:!1,category:""}},computed:{filteredProducts(){return this.products.filter(n=>n.category===this.category)}},components:{PaginationView:P},methods:{getProducts(n=1){this.isLoading=!0,this.$http.get(`${x}/v2/api/${v}/products/?page=${n}`).then(s=>{this.isLoading=!1,this.products=s.data.products,this.page=s.data.pagination}).catch(s=>{this.isLoading=!1,u.fire({icon:"error",title:`錯誤 ${s.response.status}`,text:s.response.data.message,confirmButtonText:"OK"})})},addToCart(n){const s={product_id:n,qty:1};this.isLoading=!0,this.$http.post(`${x}/v2/api/${v}/cart`,{data:s}).then(d=>{this.isLoading=!1,u.fire({icon:"success",title:d.data.message,confirmButtonText:"OK"})}).catch(d=>{this.isLoading=!1,u.fire({icon:"error",title:`錯誤 ${d.response.status}`,text:d.response.data.message,confirmButtonText:"OK"})})}},mounted(){this.getProducts()}},V={class:"container mt-md-5 mt-3 mb-7"},C={class:"row justify-content-center"},L={class:"col-2"},E={class:"accordion border border-bottom border-top-0 border-start-0 border-end-0 mb-3",id:"accordionExample"},O={class:"card border-0"},j=t("div",{class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0",id:"headingOne","data-bs-toggle":"collapse","data-bs-target":"#collapseOne"},[t("div",{class:"pe-1"},[t("h4",{class:"mb-0 text-nowrap"}," 商品分類 "),t("i",{class:"fas fa-chevron-down"})])],-1),I={id:"collapseOne",class:"collapse show","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},A={class:"card-body py-0"},B={class:"list-unstyled"},N={class:"col-md-8"},D={key:0,class:"row"},S={class:"card mb-2 position-relative position-relative"},U=["src"],K=t("a",{href:"#",class:"text-dark"},[t("i",{class:"far fa-heart position-absolute",style:{right:"16px",top:"16px"}})],-1),F={class:"card-body pb-2 d-flex flex-column justify-content-between",style:{height:"160px"}},H={class:"mt-3 fs-5"},M={class:"card-text mb-0"},R={class:"text-muted"},q=["onClick"],z={key:1,class:"row"},G={class:"card mb-2 position-relative position-relative"},J=["src"],Q=t("a",{href:"#",class:"text-dark"},[t("i",{class:"far fa-heart position-absolute",style:{right:"16px",top:"16px"}})],-1),W={class:"card-body pb-2 d-flex flex-column justify-content-between",style:{height:"160px"}},X={class:"mt-3 fs-5"},Y={class:"card-text mb-0"},Z={class:"text-muted"},tt=["onClick"];function et(n,s,d,st,o,l){const y=m("LoadingView"),p=m("router-link"),w=m("PaginationView");return i(),a("div",V,[t("div",C,[t("div",L,[t("div",E,[t("div",O,[j,t("div",I,[t("div",A,[t("ul",B,[t("li",null,[t("a",{href:"#",class:"py-2 d-block text-muted text-nowrap",onClick:s[0]||(s[0]=_(e=>o.category="",["prevent"]))},"全部")]),t("li",null,[t("a",{href:"#",class:"py-2 d-block text-muted text-nowrap",onClick:s[1]||(s[1]=_(e=>o.category="盒玩",["prevent"]))},"盒玩")]),t("li",null,[t("a",{href:"#",class:"py-2 d-block text-muted text-nowrap",onClick:s[2]||(s[2]=_(e=>o.category="扭蛋",["prevent"]))},"扭蛋")]),t("li",null,[t("a",{href:"#",class:"py-2 d-block text-muted text-nowrap",onClick:s[3]||(s[3]=_(e=>o.category="模型",["prevent"]))},"模型")])])])])])]),r(y,{active:o.isLoading,"onUpdate:active":s[4]||(s[4]=e=>o.isLoading=e)},null,8,["active"])]),t("div",N,[this.category==""?(i(),a("div",D,[(i(!0),a(g,null,b(o.products,e=>(i(),a("div",{class:"col-md-6 mb-4",key:e.id},[t("div",S,[r(p,{to:`/product/${e.id}`},{default:h(()=>[t("img",{src:e.imageUrl,class:"card-img-top rounded-0",alt:"...",style:{"max-height":"150px","object-fit":"cover","object-position":"top center"}},null,8,U)]),_:2},1032,["to"]),K,t("div",F,[r(p,{to:`/product/${e.id}`},{default:h(()=>[t("h4",H,c(e.title),1)]),_:2},1032,["to"]),t("p",M,[f("NT$"+c(e.price)+" ",1),t("span",R,[t("del",null,"NT$"+c(e.origin_price),1)])]),t("button",{type:"button",class:"btn btn-outline-primary btn-sm text-nowrap align-self-end",onClick:k=>l.addToCart(e.id)},"加入購物車",8,q)])])]))),128))])):(i(),a("div",z,[(i(!0),a(g,null,b(l.filteredProducts,e=>(i(),a("div",{class:"col-md-6 mb-4",key:e.id},[t("div",G,[r(p,{to:`/product/${e.id}`},{default:h(()=>[t("img",{src:e.imageUrl,class:"card-img-top rounded-0",alt:"...",style:{"max-height":"150px","object-fit":"cover","object-position":"top center"}},null,8,J)]),_:2},1032,["to"]),Q,t("div",W,[r(p,{to:`/product/${e.id}`},{default:h(()=>[t("h4",X,c(e.title),1)]),_:2},1032,["to"]),t("p",Y,[f("NT$"+c(e.price)+" ",1),t("span",Z,[t("del",null,"NT$"+c(e.origin_price),1)])]),t("button",{type:"button",class:"btn btn-outline-primary btn-sm text-nowrap align-self-end",onClick:k=>l.addToCart(e.id)},"加入購物車",8,tt)])])]))),128))])),r(w,{pages:o.page,onEmitPage:l.getProducts,class:"d-flex justify-content-center"},null,8,["pages","onEmitPage"])])])])}const nt=T($,[["render",et]]);export{nt as default};
