import{P as v}from"./PaginationView-eca78fb9.js";import{S as n}from"./sweetalert2.all-80534048.js";import{_ as x,r as d,o as c,c as r,a as t,b as l,F as y,f as w,d as P,w as V,e as _,t as p}from"./index-0a2bf6a4.js";const{VITE_API:m,VITE_APIPATH:u}={VITE_API:"https://vue3-course-api.hexschool.io/",VITE_APIPATH:"whattoplay",BASE_URL:"/what_to_play/",MODE:"production",DEV:!1,PROD:!0},T={data(){return{products:[],page:{},isLoading:!1}},components:{PaginationView:v},methods:{getProducts(a=1){this.isLoading=!0,this.$http.get(`${m}/v2/api/${u}/products/?page=${a}`).then(e=>{this.isLoading=!1,this.products=e.data.products,this.page=e.data.pagination}).catch(e=>{this.isLoading=!1,n.fire({icon:"error",title:`錯誤 ${e.response.status}`,text:e.response.data.message,confirmButtonText:"OK"})})},addToCart(a){const e={product_id:a,qty:1};this.isLoading=!0,this.$http.post(`${m}/v2/api/${u}/cart`,{data:e}).then(o=>{this.isLoading=!1,n.fire({icon:"success",title:o.data.message,confirmButtonText:"OK"})}).catch(o=>{this.isLoading=!1,n.fire({icon:"error",title:`錯誤 ${o.response.status}`,text:o.response.data.message,confirmButtonText:"OK"})})}},mounted(){this.getProducts()}},L={class:"container mt-md-5 mt-3 mb-7"},E={class:"row justify-content-center"},k={class:"col-2"},$=P('<div class="accordion border border-bottom border-top-0 border-start-0 border-end-0 mb-3" id="accordionExample"><div class="card border-0"><div class="card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0" id="headingOne" data-bs-toggle="collapse" data-bs-target="#collapseOne"><div class="d-flex justify-content-between align-items-center pe-1"><h4 class="mb-0"> 商品分類 </h4><i class="fas fa-chevron-down"></i></div></div><div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample"><div class="card-body py-0"><ul class="list-unstyled"><li><a href="#" class="py-2 d-block text-muted">盒玩</a></li><li><a href="#" class="py-2 d-block text-muted">扭蛋</a></li><li><a href="#" class="py-2 d-block text-muted">模型</a></li></ul></div></div></div></div>',1),O={class:"col-md-8"},I={class:"row"},A={class:"card border-0 mb-4 position-relative position-relative"},B=["src"],j=t("a",{href:"#",class:"text-dark"},[t("i",{class:"far fa-heart position-absolute",style:{right:"16px",top:"16px"}})],-1),C={class:"card-body p-0 d-flex justify-content-between align-items-end"},N={class:"w-75"},S={class:"mb-0 mt-3 fs-5"},D={class:"card-text mb-0"},K={class:"text-muted"},U=["onClick"];function F(a,e,o,H,i,h){const g=d("LoadingView"),b=d("router-link"),f=d("PaginationView");return c(),r("div",L,[t("div",E,[t("div",k,[$,l(g,{active:i.isLoading,"onUpdate:active":e[0]||(e[0]=s=>i.isLoading=s)},null,8,["active"])]),t("div",O,[t("div",I,[(c(!0),r(y,null,w(i.products,s=>(c(),r("div",{class:"col-md-6",key:s.id},[t("div",A,[t("img",{src:s.imageUrl,class:"card-img-top rounded-0",alt:"...",style:{"max-height":"200px","object-fit":"cover","object-position":"top center"}},null,8,B),j,t("div",C,[t("div",N,[t("h4",S,[l(b,{to:`/product/${s.id}`},{default:V(()=>[_(p(s.title),1)]),_:2},1032,["to"])]),t("p",D,[_("NT$"+p(s.price)+" ",1),t("span",K,[t("del",null,"NT$"+p(s.origin_price),1)])])]),t("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:R=>h.addToCart(s.id)},"加入購物車",8,U)])])]))),128))]),l(f,{pages:i.page,onEmitPage:h.getProducts,class:"d-flex justify-content-center"},null,8,["pages","onEmitPage"])])])])}const G=x(T,[["render",F]]);export{G as default};
