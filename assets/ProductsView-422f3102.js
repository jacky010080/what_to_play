import{P}from"./PaginationView-f219e6f8.js";import{S as u}from"./sweetalert2.all-43049c76.js";import{_ as T,r as h,o as i,a as n,b as t,i as m,d as r,F as g,h as b,w as _,t as d,g as f}from"./index-6a6f3833.js";const{VITE_API:y,VITE_APIPATH:x}={VITE_API:"https://vue3-course-api.hexschool.io/",VITE_APIPATH:"whattoplay",BASE_URL:"/what_to_play/",MODE:"production",DEV:!1,PROD:!0},$={data(){return{products:[],page:{},isLoading:!1,category:""}},computed:{filteredProducts(){return this.products.filter(a=>a.category===this.category)}},components:{PaginationView:P},methods:{getProducts(a=1){this.isLoading=!0,this.$http.get(`${y}/v2/api/${x}/products/?page=${a}`).then(s=>{this.isLoading=!1,this.products=s.data.products,this.page=s.data.pagination}).catch(s=>{this.isLoading=!1,u.fire({icon:"error",title:`錯誤 ${s.response.status}`,text:s.response.data.message,confirmButtonText:"OK"})})},addToCart(a){const s={product_id:a,qty:1};this.isLoading=!0,this.$http.post(`${y}/v2/api/${x}/cart`,{data:s}).then(c=>{this.isLoading=!1,u.fire({icon:"success",title:c.data.message,confirmButtonText:"OK"})}).catch(c=>{this.isLoading=!1,u.fire({icon:"error",title:`錯誤 ${c.response.status}`,text:c.response.data.message,confirmButtonText:"OK"})})}},mounted(){this.getProducts()}},V={class:"container mt-md-5 mt-3 mb-7"},C={class:"row justify-content-center"},L={class:"col-md-2"},E={class:"accordion border border-bottom border-top-0 border-start-0 border-end-0 mb-3",id:"accordionExample"},I={class:"card border-0 d-flex flex-column align-items-md-start align-items-center"},O=t("div",{class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0",id:"headingOne","data-bs-toggle":"collapse","data-bs-target":"#collapseOne"},[t("h4",{class:"mb-0 text-nowrap"},"商品分類")],-1),j={id:"collapseOne",class:"collapse show","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},A={class:"card-body py-0"},B={class:"list-unstyled"},N={class:"col-md-8"},D={key:0,class:"row"},S={class:"card mb-2 position-relative position-relative"},U=["src"],K={class:"card-body pb-2 d-flex flex-column justify-content-between",style:{height:"160px"}},F={class:"mt-3 fs-5"},H={class:"card-text mb-0"},M={class:"text-muted"},R=["onClick"],q={key:1,class:"row"},z={class:"card mb-2 position-relative position-relative"},G=["src"],J={class:"card-body pb-2 d-flex flex-column justify-content-between",style:{height:"160px"}},Q={class:"mt-3 fs-5"},W={class:"card-text mb-0"},X={class:"text-muted"},Y=["onClick"];function Z(a,s,c,tt,o,l){const v=h("LoadingView"),p=h("router-link"),w=h("PaginationView");return i(),n("div",V,[t("div",C,[t("div",L,[t("div",E,[t("div",I,[O,t("div",j,[t("div",A,[t("ul",B,[t("li",null,[t("a",{href:"#",class:"py-2 d-block text-muted text-nowrap link-primary",onClick:s[0]||(s[0]=m(e=>o.category="",["prevent"]))}," 全部 ")]),t("li",null,[t("a",{href:"#",class:"py-2 d-block text-muted text-nowrap link-primary",onClick:s[1]||(s[1]=m(e=>o.category="盒玩",["prevent"]))}," 盒玩 ")]),t("li",null,[t("a",{href:"#",class:"py-2 d-block text-muted text-nowrap link-primary",onClick:s[2]||(s[2]=m(e=>o.category="扭蛋",["prevent"]))}," 扭蛋 ")]),t("li",null,[t("a",{href:"#",class:"py-2 d-block text-muted text-nowrap link-primary",onClick:s[3]||(s[3]=m(e=>o.category="模型",["prevent"]))}," 模型 ")])])])])])]),r(v,{active:o.isLoading,"onUpdate:active":s[4]||(s[4]=e=>o.isLoading=e)},null,8,["active"])]),t("div",N,[this.category==""?(i(),n("div",D,[(i(!0),n(g,null,b(o.products,e=>(i(),n("div",{class:"col-md-6 mb-3",key:e.id},[t("div",S,[r(p,{to:`/product/${e.id}`},{default:_(()=>[t("img",{src:e.imageUrl,class:"card-img-top rounded-top",alt:"productImage",style:{"max-height":"150px","object-fit":"cover","object-position":"top center"}},null,8,U)]),_:2},1032,["to"]),t("div",K,[r(p,{to:`/product/${e.id}`},{default:_(()=>[t("h4",F,d(e.title),1)]),_:2},1032,["to"]),t("p",H,[f(" NT$"+d(e.price)+" ",1),t("span",M,[t("del",null,"NT$"+d(e.origin_price),1)])]),t("button",{type:"button",class:"btn btn-outline-primary btn-sm text-nowrap align-self-end",onClick:k=>l.addToCart(e.id)}," 加入購物車 ",8,R)])])]))),128))])):(i(),n("div",q,[(i(!0),n(g,null,b(l.filteredProducts,e=>(i(),n("div",{class:"col-md-6 mb-4",key:e.id},[t("div",z,[r(p,{to:`/product/${e.id}`},{default:_(()=>[t("img",{src:e.imageUrl,class:"card-img-top rounded-0",alt:"productImage",style:{"max-height":"150px","object-fit":"cover","object-position":"top center"}},null,8,G)]),_:2},1032,["to"]),t("div",J,[r(p,{to:`/product/${e.id}`},{default:_(()=>[t("h4",Q,d(e.title),1)]),_:2},1032,["to"]),t("p",W,[f(" NT$"+d(e.price)+" ",1),t("span",X,[t("del",null,"NT$"+d(e.origin_price),1)])]),t("button",{type:"button",class:"btn btn-outline-primary btn-sm text-nowrap align-self-end",onClick:k=>l.addToCart(e.id)}," 加入購物車 ",8,Y)])])]))),128))])),r(w,{pages:o.page,onEmitPage:l.getProducts,class:"d-flex justify-content-center"},null,8,["pages","onEmitPage"])])])])}const it=T($,[["render",Z]]);export{it as default};
