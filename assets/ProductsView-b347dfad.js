import{P as C}from"./PaginationView-2f2feb7a.js";import{S as h}from"./sweetalert2.all-c673b1b6.js";import{_ as L,r as u,o as i,a as n,b as t,h as _,i as m,d as c,F as f,g as v,w as g,t as r,f as b}from"./index-7c97d6a4.js";const{VITE_API:x,VITE_APIPATH:y}={VITE_API:"https://vue3-course-api.hexschool.io/",VITE_APIPATH:"whattoplay",BASE_URL:"/what_to_play/",MODE:"production",DEV:!1,PROD:!0},T={emits:["refreshCart"],data(){return{products:[],page:{},isLoading:!1,category:""}},computed:{filteredProducts(){return this.products.filter(a=>a.category===this.category)}},components:{PaginationView:C},methods:{getProducts(a=1){this.isLoading=!0,this.$http.get(`${x}/v2/api/${y}/products/?page=${a}`).then(s=>{this.isLoading=!1,this.products=s.data.products,this.page=s.data.pagination}).catch(s=>{this.isLoading=!1,h.fire({icon:"error",title:`錯誤 ${s.response.status}`,text:s.response.data.message,confirmButtonText:"OK"})})},addToCart(a){const s={product_id:a,qty:1};this.isLoading=!0,this.$http.post(`${x}/v2/api/${y}/cart`,{data:s}).then(l=>{this.isLoading=!1,h.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3}).fire({icon:"success",title:l.data.message}),this.$emit("refreshCart")}).catch(l=>{this.isLoading=!1,h.fire({icon:"error",title:`錯誤 ${l.response.status}`,text:l.response.data.message,confirmButtonText:"OK"})})}},mounted(){this.getProducts()}},V={class:"container mt-md-5 mt-3 mb-7"},E={class:"row justify-content-center"},$={class:"col-md-2"},j={class:"accordion mb-3",id:"accordionExample"},I={class:"card border-0 d-flex flex-column align-items-md-start align-items-center"},O=t("div",{class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0",id:"headingOne","data-bs-toggle":"collapse","data-bs-target":"#collapseOne"},[t("h4",{class:"mb-0 text-nowrap"},"商品分類")],-1),S={id:"collapseOne",class:"collapse show border-bottom","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},A={class:"card-body py-0"},B={class:"list-unstyled nav d-flex flex-column align-items-center"},N={class:"nav-item text-md-start text-center"},D={class:"nav-item text-md-start text-center"},U={class:"nav-item text-md-start text-center"},F={class:"nav-item text-md-start text-center"},H={class:"col-md-8"},K={key:0,class:"row"},M={class:"card mb-2 position-relative position-relative"},R=["src"],q={class:"card-body pb-2 d-flex flex-column justify-content-md-between",style:{height:"140px"}},z={class:"mt-3 fs-5"},G={class:"card-text d-flex justify-content-between"},J={class:"text-muted"},Q=["onClick"],W={key:1,class:"row"},X={class:"card mb-2 position-relative position-relative"},Y=["src"],Z={class:"card-body pb-2 d-flex flex-column justify-content-md-between",style:{height:"140px"}},tt={class:"mt-3 fs-5"},et={class:"card-text d-flex justify-content-between"},st={class:"text-muted"},ot=["onClick"];function it(a,s,l,nt,o,d){const w=u("LoadingView"),p=u("router-link"),k=u("PaginationView");return i(),n("div",V,[t("div",E,[t("div",$,[t("div",j,[t("div",I,[O,t("div",S,[t("div",A,[t("ul",B,[t("li",N,[t("a",{href:"#",class:_(["nav-link py-2 d-block text-nowrap",{active:o.category===""}]),onClick:s[0]||(s[0]=m(e=>o.category="",["prevent"]))}," 全部 ",2)]),t("li",D,[t("a",{href:"#",class:_(["nav-link py-2 d-block text-nowrap",{active:o.category==="盒玩"}]),onClick:s[1]||(s[1]=m(e=>o.category="盒玩",["prevent"]))}," 盒玩 ",2)]),t("li",U,[t("a",{href:"#",class:_(["nav-link py-2 d-block text-nowrap",{active:o.category==="扭蛋"}]),onClick:s[2]||(s[2]=m(e=>o.category="扭蛋",["prevent"]))}," 扭蛋 ",2)]),t("li",F,[t("a",{href:"#",class:_(["nav-link py-2 d-block text-nowrap",{active:o.category==="模型"}]),onClick:s[3]||(s[3]=m(e=>o.category="模型",["prevent"]))}," 模型 ",2)])])])])])]),c(w,{active:o.isLoading,"onUpdate:active":s[4]||(s[4]=e=>o.isLoading=e)},null,8,["active"])]),t("div",H,[this.category==""?(i(),n("div",K,[(i(!0),n(f,null,v(o.products,e=>(i(),n("div",{class:"col-md-6 mb-3",key:e.id},[t("div",M,[c(p,{to:`/product/${e.id}`},{default:g(()=>[t("img",{src:e.imageUrl,class:"card-img-top rounded-top",alt:"productImage",style:{height:"150px","object-fit":"cover","object-position":"top center"}},null,8,R)]),_:2},1032,["to"]),t("div",q,[c(p,{to:`/product/${e.id}`},{default:g(()=>[t("h4",z,r(e.title),1)]),_:2},1032,["to"]),t("div",G,[t("p",null,[b(" NT$"+r(e.price.toLocaleString())+" ",1),t("span",J,[t("del",null,"NT$"+r(e.origin_price.toLocaleString()),1)])]),t("button",{type:"button",class:"btn btn-outline-primary btn-md-sm text-nowrap align-self-end mt-4",onClick:P=>d.addToCart(e.id)}," 加入購物車 ",8,Q)])])])]))),128))])):(i(),n("div",W,[(i(!0),n(f,null,v(d.filteredProducts,e=>(i(),n("div",{class:"col-md-6 mb-3",key:e.id},[t("div",X,[c(p,{to:`/product/${e.id}`},{default:g(()=>[t("img",{src:e.imageUrl,class:"card-img-top rounded-top",alt:"productImage",style:{height:"150px","object-fit":"cover","object-position":"top center"}},null,8,Y)]),_:2},1032,["to"]),t("div",Z,[c(p,{to:`/product/${e.id}`},{default:g(()=>[t("h4",tt,r(e.title),1)]),_:2},1032,["to"]),t("div",et,[t("p",null,[b(" NT$"+r(e.price.toLocaleString())+" ",1),t("span",st,[t("del",null,"NT$"+r(e.origin_price.toLocaleString()),1)])]),t("button",{type:"button",class:"btn btn-outline-primary btn-md-sm text-nowrap align-self-end mt-4",onClick:P=>d.addToCart(e.id)}," 加入購物車 ",8,ot)])])])]))),128))])),c(k,{pages:o.page,onEmitPage:d.getProducts,class:"d-flex justify-content-center"},null,8,["pages","onEmitPage"])])])])}const lt=L(T,[["render",it]]);export{lt as default};
